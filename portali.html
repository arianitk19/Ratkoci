<!DOCTYPE html>
<html lang="sq" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>METROPOL RATKOCI | V16 ELITE SYSTEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { gold: '#D4AF37', dark: '#030303', card: '#0a0a0a' },
                    animation: { 'shimmer': 'shimmer 2s infinite', 'float': 'float 3s ease-in-out infinite' },
                    keyframes: {
                        shimmer: { '0%': { opacity: 0.5 }, '50%': { opacity: 1 }, '100%': { opacity: 0.5 } },
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-5px)' } }
                    }
                }
            }
        }
    </script>
    <style>
        body { background: #030303; color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; overflow-x: hidden; }
        .bento-node { background: rgba(15, 15, 15, 0.6); border: 1px solid rgba(255,255,255,0.03); border-radius: 2rem; backdrop-filter: blur(20px); transition: 0.3s; height: 100%; }
        .bento-node:hover { border-color: #D4AF37; transform: translateY(-3px); box-shadow: 0 10px 30px -10px rgba(212, 175, 55, 0.1); }
        .search-input { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: white; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="antialiased pb-20">

    <header class="sticky top-0 z-[100] border-b border-white/5 bg-black/60 backdrop-blur-3xl px-6 py-4">
        <div class="max-w-[1550px] mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="h-10 w-10 bg-gold rounded-xl flex items-center justify-center shadow-lg shadow-gold/20">
                    <i class="fas fa-microchip text-black"></i>
                </div>
                <h1 class="text-xl font-black tracking-tighter uppercase italic text-white">Metropol<span class="text-gold">Ratkoc</span></h1>
            </div>
            <div id="live-clock" class="text-xs font-mono font-black text-gold border border-gold/20 px-6 py-2.5 rounded-2xl bg-gold/5 italic tracking-widest">00:00:00</div>
        </div>
    </header>

    <main class="max-w-[1550px] mx-auto p-6 space-y-6">

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <button onclick="openAI()" class="md:col-span-1 bento-node p-8 border-gold/30 bg-gold/5 flex flex-col items-center justify-center group hover:bg-gold/10 transition-all">
                <div class="h-16 w-16 bg-gold rounded-full flex items-center justify-center mb-4 shadow-2xl shadow-gold/20 group-hover:scale-110 transition-transform">
                    <i class="fas fa-microphone text-black text-2xl"></i>
                </div>
                <h3 class="text-xs font-black uppercase italic tracking-widest text-gold">Asistenti me Zë</h3>
                <p class="text-[8px] text-gray-500 mt-2 uppercase">Klikoni për të kërkuar</p>
            </button>

            <div id="weather-node" class="md:col-span-1 bento-node p-8 flex flex-col justify-between">
                <h3 class="text-[10px] font-black uppercase tracking-widest text-gold/60 italic">Sateliti Real-Time</h3>
                <div class="flex items-center gap-6">
                    <span id="temp-real" class="text-5xl font-black">2°C</span>
                    <div class="text-[10px] font-bold uppercase italic text-gray-400">Ratkoc, Kosovë</div>
                </div>
            </div>

            <div class="md:col-span-2 bento-node p-8 border-l-4 border-gold bg-gold/5">
                <h3 class="text-[10px] font-black uppercase text-gold mb-4 italic">Llogaritësi i Trustit (10%)</h3>
                <div class="flex gap-4">
                    <input type="number" id="trustInput" placeholder="Shuma në Euro..." class="search-input w-full py-3 px-4 rounded-xl text-sm font-bold">
                    <div id="trustResult" class="min-w-[120px] bg-gold text-black rounded-xl flex items-center justify-center font-black italic text-sm italic">0.00 €</div>
                </div>
            </div>
        </div>

        <div id="prayer-section" class="bento-node p-8 border border-white/5">
            <div class="flex justify-between items-center mb-8">
                <h3 class="text-xs font-black uppercase tracking-[0.3em] text-gold italic"><i class="fas fa-moon mr-2"></i>Vaktet e Namazit</h3>
                <span id="hijri-date" class="text-[9px] font-mono text-gray-500 uppercase tracking-widest">-- -- -- AH</span>
            </div>
            <div id="prayer-times-container" class="grid grid-cols-2 md:grid-cols-6 gap-4 text-center">
                <div id="vakti-Fajr" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5">
                    <p class="text-[8px] text-gray-500 font-black uppercase">Imsaku</p>
                    <p class="time text-lg font-black mt-1 text-gold">--:--</p>
                </div>
                <div id="vakti-Sunrise" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5">
                    <p class="text-[8px] text-gray-500 font-black uppercase">Lindja</p>
                    <p class="time text-lg font-black mt-1">--:--</p>
                </div>
                <div id="vakti-Dhuhr" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5">
                    <p class="text-[8px] text-gray-500 font-black uppercase">Dreka</p>
                    <p class="time text-lg font-black mt-1">--:--</p>
                </div>
                <div id="vakti-Asr" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5">
                    <p class="text-[8px] text-gray-500 font-black uppercase">Ikindia</p>
                    <p class="time text-lg font-black mt-1">--:--</p>
                </div>
                <div id="vakti-Maghrib" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5 border-gold/40 bg-gold/5">
                    <p class="text-[8px] text-gold font-black uppercase italic">Akshami</p>
                    <p class="time text-lg font-black mt-1">--:--</p>
                </div>
                <div id="vakti-Isha" class="p-4 bg-white/5 rounded-[1.5rem] border border-white/5">
                    <p class="text-[8px] text-gray-500 font-black uppercase">Jacia</p>
                    <p class="time text-lg font-black mt-1">--:--</p>
                </div>
            </div>
        </div>

        <div id="bus-section" class="bento-node p-10 border-l-4 border-blue-600">
            <h3 class="text-blue-500 font-black text-[10px] uppercase tracking-widest mb-6 italic"><i class="fas fa-bus mr-2"></i>Linjat e Autobusave - Ratkoc</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="bg-white/5 p-6 rounded-3xl"><span class="block text-[10px] text-gray-500 font-black uppercase mb-2">Prizren</span><p class="text-xs font-bold leading-relaxed">06:24, 08:10, 09:20, 11:45, 14:00, 16:40</p></div>
                <div class="bg-white/5 p-6 rounded-3xl"><span class="block text-[10px] text-gray-500 font-black uppercase mb-2">Gjakovë</span><p class="text-xs font-bold leading-relaxed">06:59, 11:54, 16:09</p></div>
                <div class="bg-white/5 p-6 rounded-3xl"><span class="block text-[10px] text-gray-500 font-black uppercase mb-2">Prishtinë</span><p class="text-xs font-bold leading-relaxed">07:00, 12:00</p></div>
            </div>
        </div>

    </main>

    <div id="ai-overlay" class="fixed inset-0 z-[1000] bg-black/98 backdrop-blur-3xl flex flex-col items-center justify-center transition-all duration-700 opacity-0 pointer-events-none translate-y-full">
        <button onclick="closeAI()" class="absolute top-10 right-10 h-16 w-16 flex items-center justify-center rounded-full bg-white/5 hover:bg-red-600 transition-all">
            <i class="fas fa-times text-2xl text-white"></i>
        </button>

        <div class="relative flex items-center justify-center">
            <div id="ai-waves" class="absolute w-[400px] h-[400px] bg-gold/10 rounded-full animate-ping"></div>
            <div class="w-48 h-48 bg-black border-8 border-gold rounded-full flex items-center justify-center shadow-[0_0_100px_rgba(212,175,55,0.4)] relative z-10">
                <i id="ai-mic-icon" class="fas fa-microphone text-6xl text-gold"></i>
            </div>
        </div>

        <div class="mt-20 text-center px-6">
            <h2 id="ai-status-label" class="text-gold font-black text-xs uppercase tracking-[0.8em] mb-4">Duke dëgjuar</h2>
            <p id="ai-transcript" class="text-2xl md:text-5xl font-light italic text-white/90 max-w-5xl leading-tight">"Folni tani..."</p>
        </div>
    </div>

    <script>
        // LIVE CLOCK
        function updateClock() {
            const now = new Date();
            document.getElementById('live-clock').innerText = now.toLocaleTimeString('sq-AL', { hour12: false });
        }
        setInterval(updateClock, 1000);

        // TRUSTI CALCULATOR
        document.getElementById('trustInput').addEventListener('input', (e) => {
            const val = e.target.value;
            document.getElementById('trustResult').innerText = (val * 0.10).toFixed(2) + " €";
        });

        // --- AI CONCIERGE ENGINE 100% ---
        const overlay = document.getElementById('ai-overlay');
        const transcript = document.getElementById('ai-transcript');
        const statusLabel = document.getElementById('ai-status-label');
        const micIcon = document.getElementById('ai-mic-icon');
        let recognition;

        function openAI() {
            // Animacioni i hapjes
            overlay.classList.remove('opacity-0', 'pointer-events-none', 'translate-y-full');
            overlay.classList.add('opacity-100', 'translate-y-0');
            
            startVoiceEngine();
        }

        function closeAI() {
            overlay.classList.add('opacity-0', 'pointer-events-none', 'translate-y-full');
            overlay.classList.remove('opacity-100', 'translate-y-0');
            if (recognition) recognition.stop();
        }

        function startVoiceEngine() {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                transcript.innerText = "Fajili: Telefoni juaj nuk e suporton këtë funksion.";
                return;
            }

            recognition = new SpeechRecognition();
            recognition.lang = 'sq-AL';
            recognition.interimResults = true;

            recognition.onstart = () => {
                micIcon.className = "fas fa-microphone text-6xl text-gold animate-pulse";
                statusLabel.innerText = "Sistemi i Ratkocit po dëgjon...";
            };

            recognition.onresult = (event) => {
                const text = event.results[0][0].transcript.toLowerCase();
                transcript.innerText = `"${text}"`;
                
                // LOGJIKA E NAVIGIMIT (100% E SAKTË)
                if (text.includes("autobus") || text.includes("autobusi") || text.includes("orar")) {
                    setTimeout(() => {
                        document.getElementById('bus-section').scrollIntoView({ behavior: 'smooth' });
                        closeAI();
                    }, 1500);
                }
                if (text.includes("namaz") || text.includes("vaktet") || text.includes("imsaku")) {
                    setTimeout(() => {
                        document.getElementById('prayer-section').scrollIntoView({ behavior: 'smooth' });
                        closeAI();
                    }, 1500);
                }
                if (text.includes("moti") || text.includes("gradët")) {
                    setTimeout(() => {
                        document.getElementById('weather-node').scrollIntoView({ behavior: 'smooth' });
                        closeAI();
                    }, 1500);
                }
            };

            recognition.onerror = (e) => {
                statusLabel.innerText = "Gabim: Klikoni X dhe provoni përsëri.";
                micIcon.classList.remove('animate-pulse');
            };

            recognition.start();
        }
    </script>
</body>
</html>
